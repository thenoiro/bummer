!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.porter=t():e.porter=t()}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:Function("return this")(),(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=function(){function e(){this.errors=[],this.track=[],this.done=!1,this.val=this.val.bind(this)}return e.prototype.val=function(){return this.value},e}(),i=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],u=0,a=o.length;u<a;u++,i++)n[i]=o[u];return n},o=function(e){return(Array.isArray(e)?e:[e]).reduce((function(e,t){var r=function(e){return"string"==typeof e?function(e){for(var t=[],r=e,n=e.length;n>0;){var i=r.indexOf("."),o=r.indexOf("["),u=i>-1,a=o>-1;if(n-=1,!u&&!a){r.length>0&&t.push(r);break}var s=u&&(!a||i<o),l=!s;if(s)if(0===i)r=r.slice(1);else{var c=r.slice(0,i);r=r.slice(i+1),t.push(c)}if(l){var f=o>0,h=!f;if(f){c=r.slice(0,o);r=r.slice(o),t.push(c)}if(h){var v=r.indexOf("]",o+1);-1===v&&(v=r.length+1,r+="]");c=r.slice(o+1,v);r=r.slice(v+1),t.push(c)}}}return t}(e):[e]}(t);return i(e,r)}),[])},u=function(e){return e&&"object"==typeof e},a=function(e,t){return!!u(e)&&Object.prototype.hasOwnProperty.call(e,t)},s=function(e){return"string"==typeof e&&e.length>0||("symbol"==typeof e||("number"==typeof e||!!(Array.isArray(e)&&e.length>0)&&e.every(s)))},l=function(e){return u(e)},c=function(e){this.exist=!1,this.created=!1,this.available=!1,this.target=null,this.value=void 0,this.key=e.key,a(e,"exist")&&"boolean"==typeof e.exist&&(this.exist=e.exist),a(e,"created")&&"boolean"==typeof e.created&&(this.created=e.created),a(e,"available")&&"boolean"==typeof e.available&&(this.available=e.available),a(e,"target")&&l(e.target)&&(this.target=e.target),a(e,"value")&&(this.value=e.value)},f=function(e,t,r){void 0===r&&(r=!1);return t.reduce((function(t,n,i){var o=n,u=new c({key:o}),s=t[t.length-1],f=0===i?e:s.value,h=l(f);if(!h&&!s.exist&&r){var v=NaN;"symbol"!=typeof o&&(v=Number(o));var p=!Number.isNaN(v),d=Number.isInteger(v)||!Number.isFinite(v),y=p&&d?[]:{};l(s.target)&&(s.target[s.key]=y),f=y,s.value=y,h=!0}return h&&(u.target=f,a(f,o)?(u.exist=!0,u.value=f[o]):r&&(f[o]=void 0,u.created=!0)),u.available=u.exist||u.created,t.push(u),t}),[])},h={PATH:"Wrong path.",SUBJECT:"Wrong subject."},v=function(){function e(e){this.result=new n,this.get=this.get.bind(this),this.set=this.set.bind(this),this.check=this.check.bind(this),this.remove=this.remove.bind(this),this.replace=this.replace.bind(this),this.subject=e,l(e)||(this.result.errors.push(h.SUBJECT),this.subject={})}return e.prototype.get=function(e){if(this.validatePath(e)){var t=o(e),r=f(this.subject,t);this.result.track=r,this.result.done=r.every((function(e){return e.available})),this.result.done&&(this.result.value=r[r.length-1].value)}return this.result},e.prototype.set=function(e,t,r){if(void 0===r&&(r=!0),this.validatePath(e)){var n=o(e),i=f(this.subject,n,r);if(this.result.track=i,this.result.done=i.every((function(e){return e.available})),this.result.value=!1,this.result.done){var u=i[i.length-1],a=u.target,s=u.key;l(a)&&(a[s]=t,this.result.value=!0)}}return this.result},e.prototype.check=function(e){var t=this.get(e);return t.value=t.done,t},e.prototype.remove=function(e,t){void 0===t&&(t=!1);var r=this.get(e);if(t||(r.value=r.done),r.done){var n=r.track[r.track.length-1],i=n.target,o=n.key;l(i)&&delete i[o]}return r},e.prototype.replace=function(e,t,r){if(void 0===r&&(r=!0),this.validatePath(e)){var n=o(e),i=f(this.subject,n,r);if(this.result.track=i,this.result.done=i.every((function(e){return e.available})),this.result.done){var u=i[i.length-1],a=u.target,s=u.key;if(l(a)){var c=a[s];a[s]=t,this.result.value=c}}}return this.result},e.prototype.validatePath=function(e){var t=s(e);return t||this.result.errors.push(h.PATH),t},e}(),p=function(e){var t=new v(e);return{get:t.get,set:t.set,check:t.check,remove:t.remove,replace:t.replace}};p.get=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=p(e)).get.apply(t,r)},p.set=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=p(e)).set.apply(t,r)},p.check=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=p(e)).check.apply(t,r)},p.remove=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=p(e)).remove.apply(t,r)},p.replace=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=p(e)).replace.apply(t,r)};t.default=p}]).default}));
//# sourceMappingURL=porter.js.map